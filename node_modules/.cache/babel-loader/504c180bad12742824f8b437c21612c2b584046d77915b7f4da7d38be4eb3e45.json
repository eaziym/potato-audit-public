{"ast":null,"code":"import React,{useState,useEffect}from'react';import axios from'axios';import BookingForm from'./BookingForm';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const StaffBookingSystem=()=>{const[staffList,setStaffList]=useState([]);const[clientList,setClientList]=useState([]);const[bookings,setBookings]=useState([]);const[auditFees,setAuditFees]=useState({});// State to manage audit fees for each client\nconst[rates,setRates]=useState({'AA':180,'EA':220,'SA1':250,'SA2':300,'AM':360});useEffect(()=>{const fetchStaffAndClients=async()=>{const staffData=await axios.get('/api/staff');const clientData=await axios.get('/api/clients');if(clientData.data.clients){setClientList(clientData.data.clients);}if(staffData.data.staff){setStaffList(staffData.data.staff);}};fetchStaffAndClients();},[]);const handleRateChange=(level,newRate)=>{setRates(prevRates=>({...prevRates,[level]:newRate}));};const handleBookingSubmit=async bookingData=>{alert('Booking submitted!');const dataToSend={...bookingData,rates:rates};const response=await axios.post('/api/bookings',dataToSend);if(response.status===200){setBookings([...bookings,response.data]);}};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Staff Booking\"}),/*#__PURE__*/_jsx(\"h2\",{children:\"Hourly Rates\"}),Object.entries(rates).map(_ref=>{let[level,rate]=_ref;return/*#__PURE__*/_jsxs(\"div\",{children:[level,\": \",/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:rate,onChange:e=>handleRateChange(level,e.target.value)})]},level);}),/*#__PURE__*/_jsx(BookingForm,{staffList:staffList,clientList:clientList,onSubmit:handleBookingSubmit,auditFees:auditFees,setAuditFees:setAuditFees// Pass the setAuditFees function\n})]});};export default StaffBookingSystem;","map":{"version":3,"names":["React","useState","useEffect","axios","BookingForm","jsx","_jsx","jsxs","_jsxs","StaffBookingSystem","staffList","setStaffList","clientList","setClientList","bookings","setBookings","auditFees","setAuditFees","rates","setRates","fetchStaffAndClients","staffData","get","clientData","data","clients","staff","handleRateChange","level","newRate","prevRates","handleBookingSubmit","bookingData","alert","dataToSend","response","post","status","children","Object","entries","map","_ref","rate","type","value","onChange","e","target","onSubmit"],"sources":["/Users/msy/Desktop/Shiyao/repo/potato-audit/src/StaffBookingSystem.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport BookingForm from './BookingForm';\n\nconst StaffBookingSystem = () => {\n    const [staffList, setStaffList] = useState([]);\n    const [clientList, setClientList] = useState([]);\n    const [bookings, setBookings] = useState([]);\n    const [auditFees, setAuditFees] = useState({}); // State to manage audit fees for each client\n    const [rates, setRates] = useState({\n        'AA': 180,\n        'EA': 220,\n        'SA1': 250,\n        'SA2': 300,\n        'AM': 360\n    });\n\n    useEffect(() => {\n        const fetchStaffAndClients = async () => {\n            const staffData = await axios.get('/api/staff');\n            const clientData = await axios.get('/api/clients');\n            if (clientData.data.clients) {\n                setClientList(clientData.data.clients);\n              }\n            if (staffData.data.staff){\n                setStaffList(staffData.data.staff);\n            }\n        };\n        fetchStaffAndClients();\n    }, []);\n\n    const handleRateChange = (level, newRate) => {\n        setRates(prevRates => ({\n            ...prevRates,\n            [level]: newRate\n        }));\n    };\n\n    const handleBookingSubmit = async (bookingData) => {\n        alert('Booking submitted!');\n        const dataToSend = {\n            ...bookingData,\n            rates: rates\n        };\n        const response = await axios.post('/api/bookings', dataToSend);\n        if (response.status === 200) {\n            setBookings([...bookings, response.data]);\n        }\n    };\n\n    return (\n        <div>\n            <h1>Staff Booking</h1>\n            <h2>Hourly Rates</h2>\n            {Object.entries(rates).map(([level, rate]) => (\n                <div key={level}>\n                    {level}: <input type=\"number\" value={rate} onChange={(e) => handleRateChange(level, e.target.value)} />\n                </div>\n            ))}\n            <BookingForm \n                staffList={staffList} \n                clientList={clientList} \n                onSubmit={handleBookingSubmit} \n                auditFees={auditFees} \n                setAuditFees={setAuditFees} // Pass the setAuditFees function\n            />\n        </div>\n    );\n};\n\nexport default StaffBookingSystem;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}