{"ast":null,"code":"import React,{useState,useEffect}from'react';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const BookingForm=_ref=>{let{staffList,clientList,onSubmit,auditFees,setAuditFees}=_ref;const[selectedStaff,setSelectedStaff]=useState('');const[selectedClient,setSelectedClient]=useState('');const[selectedFY,setSelectedFY]=useState('');const[startDate,setStartDate]=useState('');const[endDate,setEndDate]=useState('');const[auditFee,setAuditFee]=useState('');const[editFee,setEditFee]=useState(false);const getFinancialYears=()=>{const currentYear=new Date().getFullYear();let years=[];for(let year=2000;year<=currentYear;year++){years.push(\"FY\".concat(year));}return years;};const handleStaffSelection=event=>{const selectedIndex=event.target.options.selectedIndex;const staffName=event.target.options[selectedIndex].getAttribute('data-name');const staffLevel=event.target.options[selectedIndex].getAttribute('data-level');setSelectedStaff({name:staffName,level:staffLevel});};useEffect(()=>{if(selectedClient){if(auditFees[selectedClient]){setAuditFee(auditFees[selectedClient]);setEditFee(false);}else{setAuditFee('');setEditFee(true);}}},[selectedClient,auditFees]);const handleAuditFeeChange=e=>{if(editFee){// Ensure changes are only made if editing is enabled\nsetAuditFee(e.target.value);}};const enableEditFee=()=>{setEditFee(true);};const handleConfirmFee=()=>{setEditFee(false);// Disable editing when confirmed\nsetAuditFees(prev=>({...prev,[selectedClient]:auditFee}));// Update the global state if necessary\n};const handleSubmit=e=>{e.preventDefault();onSubmit({staff:selectedStaff,client:selectedClient,financialYear:selectedFY,startDate,endDate,auditFee:auditFee// Always send the current audit fee\n});if(editFee){setAuditFees(prev=>({...prev,[selectedClient]:auditFee}));}};return/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"booking-form\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsxs(\"label\",{children:[\"Staff:\",/*#__PURE__*/_jsxs(\"select\",{value:selectedStaff.name,onChange:handleStaffSelection,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select Staff\"}),staffList.map((staff,index)=>/*#__PURE__*/_jsx(\"option\",{\"data-name\":staff.name,\"data-level\":staff.level,value:staff.name,children:\"\".concat(staff.name,\" (\").concat(staff.level,\")\")},index))]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsxs(\"label\",{children:[\"Client:\",/*#__PURE__*/_jsxs(\"select\",{value:selectedClient,onChange:e=>setSelectedClient(e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select Client\"}),clientList.map(clientName=>/*#__PURE__*/_jsx(\"option\",{value:clientName,children:clientName},clientName))]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsxs(\"label\",{children:[\"Financial Year:\",/*#__PURE__*/_jsxs(\"select\",{value:selectedFY,onChange:e=>setSelectedFY(e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select Financial Year\"}),getFinancialYears().map(fy=>/*#__PURE__*/_jsx(\"option\",{value:fy,children:fy},fy))]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsxs(\"label\",{children:[\"Start Date: \",/*#__PURE__*/_jsx(\"input\",{type:\"date\",value:startDate,onChange:e=>setStartDate(e.target.value)})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsxs(\"label\",{children:[\"End Date: \",/*#__PURE__*/_jsx(\"input\",{type:\"date\",value:endDate,onChange:e=>setEndDate(e.target.value)})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsxs(\"label\",{children:[\"Audit Fee:\",/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:auditFee,onChange:handleAuditFeeChange,disabled:!editFee,step:\"0.01\"}),editFee?/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:handleConfirmFee,children:\"Confirm Fee\"}):/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>enableEditFee(),children:\"Wrong Fee?\"})]})}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Book\"})]});};export default BookingForm;","map":{"version":3,"names":["React","useState","useEffect","jsx","_jsx","jsxs","_jsxs","BookingForm","_ref","staffList","clientList","onSubmit","auditFees","setAuditFees","selectedStaff","setSelectedStaff","selectedClient","setSelectedClient","selectedFY","setSelectedFY","startDate","setStartDate","endDate","setEndDate","auditFee","setAuditFee","editFee","setEditFee","getFinancialYears","currentYear","Date","getFullYear","years","year","push","concat","handleStaffSelection","event","selectedIndex","target","options","staffName","getAttribute","staffLevel","name","level","handleAuditFeeChange","e","value","enableEditFee","handleConfirmFee","prev","handleSubmit","preventDefault","staff","client","financialYear","className","children","onChange","map","index","clientName","fy","type","disabled","step","onClick"],"sources":["/Users/msy/Desktop/Shiyao/repo/potato-audit/src/BookingForm.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\n\nconst BookingForm = ({ staffList, clientList, onSubmit, auditFees, setAuditFees  }) => {\n    const [selectedStaff, setSelectedStaff] = useState('');\n    const [selectedClient, setSelectedClient] = useState('');\n    const [selectedFY, setSelectedFY] = useState('');\n    const [startDate, setStartDate] = useState('');\n    const [endDate, setEndDate] = useState('');\n    const [auditFee, setAuditFee] = useState('');\n    const [editFee, setEditFee] = useState(false);\n\n\n    const getFinancialYears = () => {\n        const currentYear = new Date().getFullYear();\n        let years = [];\n        for (let year = 2000; year <= currentYear; year++) {\n            years.push(`FY${year}`);\n        }\n        return years;\n    };\n\n    const handleStaffSelection = (event) => {\n        const selectedIndex = event.target.options.selectedIndex;\n        const staffName = event.target.options[selectedIndex].getAttribute('data-name');\n        const staffLevel = event.target.options[selectedIndex].getAttribute('data-level');\n        setSelectedStaff({\n            name: staffName,\n            level: staffLevel\n        });\n    };\n\n    useEffect(() => {\n        if (selectedClient) {\n            if (auditFees[selectedClient]) {\n                setAuditFee(auditFees[selectedClient]);\n                setEditFee(false);\n            } else {\n                setAuditFee('');\n                setEditFee(true);\n            }\n        }\n    }, [selectedClient, auditFees]);\n\n    const handleAuditFeeChange = (e) => {\n        if (editFee) {  // Ensure changes are only made if editing is enabled\n            setAuditFee(e.target.value);\n        }\n    };\n\n    const enableEditFee = () => {\n        setEditFee(true);\n    };\n\n    const handleConfirmFee = () => {\n        setEditFee(false);  // Disable editing when confirmed\n        setAuditFees(prev => ({ ...prev, [selectedClient]: auditFee }));  // Update the global state if necessary\n    };\n\n    const handleSubmit = (e) => {\n        e.preventDefault();\n        onSubmit({\n            staff: selectedStaff,\n            client: selectedClient,\n            financialYear: selectedFY,\n            startDate,\n            endDate,\n            auditFee: auditFee // Always send the current audit fee\n        });\n        if (editFee) {\n            setAuditFees(prev => ({ ...prev, [selectedClient]: auditFee }));\n        }\n    };\n\n    return (\n        <form onSubmit={handleSubmit} className=\"booking-form\">\n            {/* Staff Dropdown */}\n            <div className=\"form-group\">\n                <label>\n                    Staff:\n                    <select value={selectedStaff.name} onChange={handleStaffSelection}>\n                        <option value=\"\">Select Staff</option>\n                        {staffList.map((staff, index) => (\n                            <option key={index} data-name={staff.name} data-level={staff.level} value={staff.name}>\n                                {`${staff.name} (${staff.level})`}\n                            </option>\n                        ))}\n                    </select>\n                </label>\n            </div>\n\n            {/* Client Dropdown */}\n            <div className=\"form-group\">\n                <label>\n                    Client:\n                    <select value={selectedClient} onChange={e => setSelectedClient(e.target.value)}>\n                        <option value=\"\">Select Client</option>\n                        {clientList.map(clientName => (\n                            <option key={clientName} value={clientName}>{clientName}</option>\n                        ))}\n                    </select>\n                </label>\n            </div>\n\n            {/* Financial Year Dropdown */}\n            <div className=\"form-group\">\n                <label>\n                    Financial Year:\n                    <select value={selectedFY} onChange={e => setSelectedFY(e.target.value)}>\n                        <option value=\"\">Select Financial Year</option>\n                        {getFinancialYears().map(fy => (\n                            <option key={fy} value={fy}>{fy}</option>\n                        ))}\n                    </select>\n                </label>\n            </div>\n\n            {/* Date Inputs */}\n            <div className=\"form-group\">\n                <label>Start Date: <input type=\"date\" value={startDate} onChange={e => setStartDate(e.target.value)} /></label>\n            </div>\n            <div className=\"form-group\">\n                <label>End Date: <input type=\"date\" value={endDate} onChange={e => setEndDate(e.target.value)} /></label>\n            </div>\n\n            {/* Audit Fee Input */}\n            <div className=\"form-group\">\n                <label>\n                    Audit Fee:\n                    <input type=\"number\" value={auditFee} onChange={handleAuditFeeChange} disabled={!editFee} step=\"0.01\" />\n                    {editFee ? (\n                        <button type=\"button\" onClick={handleConfirmFee}>Confirm Fee</button>\n                    ) : (\n                        <button type=\"button\" onClick={() => enableEditFee()}>Wrong Fee?</button>\n                    )}\n                </label>\n            </div>\n\n            <button type=\"submit\">Book</button>\n        </form>\n    );\n};\n\nexport default BookingForm;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}